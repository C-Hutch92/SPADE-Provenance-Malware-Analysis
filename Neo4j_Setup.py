from py2neo import Graph

def neo4j_db_setup(uri):
    """
    Warning: this is using a different neo4j library compare with Neo4j_Queries.py because of [absolutely no reason]!
    Well, its because im too lazy to migrate it (its probably really easy).

    Another WARNING: THE COMMANDS HERE WILL WRITE TO YOUR GRAPH DB, ENSURE THAT YOU HAVE YOUR GRAPH DB BACKED UP BEFORE CONTINUING
    YOU HAVE BEEN WARNED!

    :param uri: URI of your graph database
    """
    graph = Graph(uri, auth=("neo4j", "s"))

    # Add the END NODE and the relationships to the END NODE
    graph.run("CREATE (n:VERTEX {`type`: 'END_NODE'})")
    graph.run("MATCH (n:VERTEX {`type`:'END_NODE'}), (m:VERTEX) WHERE m.`type` <> 'END_NODE' CREATE (m)-[:EDGE {`type`: 'END_REL', `time`: toString(timestamp()/100)}]->(n)")

if __name__ == '__main__':
    neo4j_db_setup("bolt://localhost:8687")
    neo4j_db_setup("bolt://localhost:7687")
    